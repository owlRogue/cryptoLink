<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>currencies</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:100,400,600,700">
</head>

<style>
    body {
        font-family: "Josefin Sans";
        background-color: aliceblue;
    }

    div {
        display: block;
    }

    button {
        margin: auto;
        width: auto;
        height: 30px;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 5px;
        line-height: 20px;
        background-color: rgb(5, 18, 57);
        border-radius: 100px;
    }

    .crypto-crypto-name {
        color: slategray;
    }

    .highlights {
        color: red;
    }

    .crypto-name {
        color: rgb(36, 65, 9);
    }

    .request-rate {
        color: rgb(0, 70, 117);
    }

    #topDisplay {
        background-color: black;
        color: white;
    }
</style>

<body>

    <div></div>

    <div class="container">
        <h1>Currency Search</h1>

        <div id="topDisplay"></div>
        <div id="display"></div>
        <div id="buttons"></div>

        <!-- We'll be dumping our JSON contents in here -->
        <div id="currency-view"></div>

        <!-- This form will be where users input data about the currencys -->
        <form id="currency-form">
            <label for="currency-input">Select your currencies</label>
            <input type="checkbox" name="cryptoName" id="currency-input" value="BTC">BTC

            <br>

            <!-- This button will trigger our AJAX call -->
            <input id="find-currency" type="submit" value="Currency Search">
        </form>

        <script src="https://rawgit.com/mzabriskie/axios/master/dist/axios.min.js"></script>
        <script src="https://rawgit.com/coinapi/coinapi-sdk/master/javascript-rest/coinapi_v1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">

            $('document').ready(function (event) {
                // RETURNS EXCHANGE RATE
                $("#find-currency").on("click", function (event) {

                    // event.preventDefault() can be used to prevent an event's default behavior.
                    // Here, it prevents the submit button from trying to submit a form when clicked
                    event.preventDefault();

                    var currency = $("#currency-input").val();
                    var queryURL = "https://rest.coinapi.io/v1/exchangerate/" + currency +
                        "?apikey=C3F818BB-21EF-425E-B53C-B069172C81CD";
                    var quoteCoin = [];
                    var compareCoinRate = [];
                    const USDbase = [];

                    $.ajax({
                        url: queryURL,
                        method: "GET"
                    }).then(function (response) {
                        console.log(response);

                        quoteCoin = response.rates;
                        compareCoinRate = compareRate;
                       // USDbase = response.rates

                        for (var i = 0; i < quoteCoin.length; i++) {
                            console.log(quoteCoin[i]);
                            console.log(quoteCoin[i].asset_id_quote);
                            console.log(quoteCoin[i].rate);
                            //$("#currency-view").text(JSON.stringify(response));

                            var compareCoinName = quoteCoin[i].asset_id_quote;
                            var compareRate = quoteCoin[i].rate;
                            

                            //$("#currency-view").text(JSON.stringify(quoteCoin));

                            var cryptoBtn = $("<button>").addClass(
                                    "crypto-button crypto crypto-crypto-name")
                                .attr("data-crypto", compareCoinName)
                                .attr("data-rate", compareRate)
                                .text(compareCoinName)
                                .appendTo("#buttons");
                        };

                        $(".crypto-button").on("click", function () {

                            var requestToDisplay = $("<div>").addClass(
                                    "crypto crypto-name")
                                .text($(this).attr("data-crypto") + "  " + $(this).attr(
                                    "data-rate"))
                                .appendTo("#display");
                        });
                    });
                });

             //   var topDisplay = $("<div>").addClass("crypto highlights")
                //text(USDbase).appendTo("#topDisplay");

            });
            // -----------------------------------------------------------------------
        </script>
    </div>
</body>

</html>